<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>R1 Tactile Catalogue</title>

<style>
body{
    margin:0;
    background:#e5e5e5;
    font-family:Arial;
}

/* toolbar */
.toolbar{
    text-align:center;
    padding:10px;
}

/* buttons */
button{
    padding:6px 12px;
    margin:4px;
    cursor:pointer;
}

/* responsive book */
#flipbook{
    width:98vw;
    height:90vh;
    margin:auto;
}

.page img{
    width:100%;
    height:100%;
    object-fit:contain;
    background:white;
}
</style>

<!-- StPageFlip -->
<script src="page-flip.browser.js"></script>

</head>

<body>

<div class="toolbar">
    <button onclick="pf.flipPrev()">â—€ Prev</button>
    <button onclick="pf.flipNext()">Next â–¶</button>
    <button onclick="downloadPDF()">Download PDF</button>
</div>

<div id="flipbook">
    <div class="page"><img src="pages/1.jpeg"></div>
    <div class="page"><img src="pages/2.jpeg"></div>
    <div class="page"><img src="pages/3.jpeg"></div>
    <div class="page"><img src="pages/4.jpeg"></div>
    <div class="page"><img src="pages/5.jpeg"></div>
</div>

<script>

/* ---------- responsive sizing ---------- */
function getSize(){
    return {
        width: Math.min(window.innerWidth * 0.98, 1200),
        height: window.innerHeight * 0.9
    };
}

let size = getSize();

/* ---------- flipbook ---------- */
const pf = new St.PageFlip(
    document.getElementById("flipbook"),
    {
        width: size.width,
        height: size.height,

        showCover:true,

        /* ðŸ”¥ smooth + realistic */
        flippingTime: 1400,
        maxShadowOpacity: 0.6,
        drawShadow:true,

        /* ðŸ”¥ mobile optimized */
        usePortrait:true,            // single page on phones
        mobileScrollSupport:false,   // allow normal scrolling
        useMouseEvents:true
    }
);

pf.loadFromHTML(document.querySelectorAll(".page"));
window.pf = pf;


/* ---------- resize on rotate ---------- */
window.addEventListener("resize", () => {
    let s = getSize();
    pf.update(s.width, s.height);
});


/* ---------- PDF ---------- */
function downloadPDF(){
    window.open("Catalogue_Revised-2.pdf");
}


/* ---------- SOUND (plays at START of flip) ---------- */
let flipSound = new Audio("flip.mp3");
flipSound.preload = "auto";

/* unlock audio on first click */
document.addEventListener("click", function enable(){
    flipSound.play().then(()=>{
        flipSound.pause();
        flipSound.currentTime = 0;
    });
    document.removeEventListener("click", enable);
});

/* play sound when flipping begins */
pf.on("changeState", (state) => {
    if(state === "flipping"){
        flipSound.currentTime = 0;
        flipSound.play();
    }
});

</script>

</body>
</html>

